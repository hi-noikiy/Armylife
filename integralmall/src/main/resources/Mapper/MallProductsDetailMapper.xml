<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.armylife.integralmall.Mapper.MallProductsDetailMapper" >
  <resultMap id="BaseResultMap" type="cn.armylife.common.Domain.MallProductsDetail">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="mall_products_detail_id" jdbcType="BIGINT" property="mallProductsDetailId" />
    <result column="mall_product_id" jdbcType="BIGINT" property="mallProductId" />
    <result column="commodity_model" jdbcType="VARCHAR" property="commodityModel" />
    <result column="commodity_color" jdbcType="VARCHAR" property="commodityColor" />
    <result column="commodity_material" jdbcType="VARCHAR" property="commodityMaterial" />
    <result column="commodity_weight" jdbcType="VARCHAR" property="commodityWeight" />
    <result column="product_specification" jdbcType="VARCHAR" property="productSpecification" />
    <result column="editing_time" jdbcType="VARCHAR" property="editingTime" />
  </resultMap>
  <resultMap id="productMap" type="cn.armylife.common.Domain.PointsMallProducts">
    <result column="points_mall_products_id" jdbcType="BIGINT" property="pointsMallProductsId" />
    <result column="using_integral" jdbcType="INTEGER" property="usingIntegral" />
    <result column="usage_amount" jdbcType="DECIMAL" property="usageAmount" />
    <result column="original_price" jdbcType="DECIMAL" property="originalPrice" />
    <result column="trade_name" jdbcType="VARCHAR" property="tradeName" />
    <result column="commodity_pictures" jdbcType="VARCHAR" property="commodityPictures" />
    <result column="commodity_details" jdbcType="VARCHAR" property="commodityDetails" />
    <result column="respective-area" jdbcType="BIGINT" property="respectiveArea" />
    <result column="adding_time" jdbcType="TIMESTAMP" property="addingTime" />
    <collection property="mallProductsDetails" ofType="cn.armylife.common.Domain.MallProductsDetail">
      <result column="mall_products_detail_id" jdbcType="BIGINT" property="mallProductsDetailId" />
      <result column="mall_product_id" jdbcType="BIGINT" property="mallProductId" />
      <result column="commodity_model" jdbcType="VARCHAR" property="commodityModel" />
      <result column="commodity_color" jdbcType="VARCHAR" property="commodityColor" />
      <result column="commodity_material" jdbcType="VARCHAR" property="commodityMaterial" />
      <result column="commodity_weight" jdbcType="VARCHAR" property="commodityWeight" />
      <result column="product_specification" jdbcType="VARCHAR" property="productSpecification" />
      <result column="editing_time" jdbcType="VARCHAR" property="editingTime" />
    </collection>
    <collection property="mallProductsPictures" ofType="cn.armylife.common.Domain.MallProductsPicture">
      <result column="mall_products_pocture_id" property="mallProductsPoctureId" jdbcType="BIGINT" />
      <result column="product_id" property="productId" jdbcType="BIGINT" />
      <result column="picture_url" property="pictureUrl" jdbcType="VARCHAR" />
    </collection>
  </resultMap>
  <insert id="insert" parameterType="cn.armylife.common.Domain.MallProductsDetail">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey keyProperty="mallProductsDetailId" order="AFTER" resultType="java.lang.Long">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into mall_products_detail (mall_product_id, commodity_model, commodity_color,
    commodity_material, commodity_weight, product_specification,
    editing_time)
    values (#{mallProductId,jdbcType=BIGINT}, #{commodityModel,jdbcType=VARCHAR}, #{commodityColor,jdbcType=VARCHAR},
    #{commodityMaterial,jdbcType=VARCHAR}, #{commodityWeight,jdbcType=VARCHAR}, #{productSpecification,jdbcType=VARCHAR},
    #{editingTime,jdbcType=VARCHAR})
  </insert>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select mall_products_detail_id, mall_product_id, commodity_model, commodity_color,
    commodity_material, commodity_weight, product_specification, editing_time
    from mall_products_detail
  </select>

  <select id="findProductForDetail" parameterType="java.lang.Long" resultMap="BaseResultMap">
    select * from mall_products_detail where mall_products_detail_id=#{productDetailId}
  </select>

  <select id="findProductForProductId" parameterType="java.lang.Long" resultMap="productMap">
    select * from points_mall_products pmp
     left join mall_products_detail mpd on mpd.mall_product_id=pmp.points_mall_products_id
     inner join mall_products_picture mpp on mpp.product_id=pmp.points_mall_products_id
     where pmp.points_mall_products_id=#{productId}
  </select>
</mapper>