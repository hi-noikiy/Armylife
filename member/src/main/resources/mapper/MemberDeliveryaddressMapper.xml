<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.armylife.member.mapper.MemberDeliveryaddressMapper" >
  <resultMap id="BaseResultMap" type="cn.armylife.common.domain.MemberDeliveryaddress">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="address_id" jdbcType="BIGINT" property="addressId" />
    <result column="member_id" jdbcType="BIGINT" property="memberId" />
    <result column="address" jdbcType="VARCHAR" property="address" />
    <result column="member_name" jdbcType="VARCHAR" property="memberName" />
    <result column="member_phone" jdbcType="VARCHAR" property="memberPhone" />
    <result column="creat_time" jdbcType="TIMESTAMP" property="creatTime" />
  </resultMap>
  <insert id="insert" parameterType="cn.armylife.common.domain.MemberDeliveryaddress">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey keyProperty="addressId" order="AFTER" resultType="java.lang.Long">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into member_deliveryaddress (member_id, address, member_name,
    member_phone, creat_time)
    values (#{memberId,jdbcType=BIGINT}, #{address,jdbcType=VARCHAR}, #{memberName,jdbcType=VARCHAR},
    #{memberPhone,jdbcType=VARCHAR}, #{creatTime,jdbcType=TIMESTAMP})
  </insert>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select address_id, member_id, address, member_name, member_phone, creat_time
    from member_deliveryaddress
  </select>

<!--  删除收货地址-->
  <delete id="removeAddress" >
    delete from member_deliveryaddress where address_id=#{addressId}
  </delete>

<!-- 查询用户收货地址 -->
  <select id="searchAddress" resultMap="BaseResultMap">
    select * from member_deliveryaddress where member_id=#{memberId}
  </select>

  <update id="updateAddress">
    update member_deliveryaddress
    <set>
      <if test="address!=null">
      address=#{address},
      </if>
      <if test="member_name!=null">
        member_name=#{memberName},
      </if>
      <if test="member_phone!=null">
        member_phone=#{memberPhone},
      </if>
      1=1
    </set>
    where address_id=#{addressId}
  </update>
</mapper>